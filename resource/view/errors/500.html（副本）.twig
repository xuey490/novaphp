{# templates/error_500.html.twig #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>500 - Internal Server Error</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Font Awesome 用于图标 -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 font-sans">
    <div class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- 错误卡片 -->
        <div class="w-full max-w-4xl bg-white rounded-lg shadow-xl overflow-hidden">
            <!-- 卡片头部 - 红色背景 -->
            <div class="bg-red-600 text-white p-6">
                <div class="flex items-center justify-between">
                    <h1 class="text-3xl font-bold flex items-center">
                        <i class="fa fa-exclamation-triangle mr-3"></i>
                        500 - Internal Server Error
                    </h1>
                    <span class="bg-red-700 text-white text-xs px-3 py-1 rounded-full">
                        {{ exception.code }}
                    </span>
                </div>
                <p class="mt-2 text-red-100">
                    Sorry, something went wrong on the server.
                </p>
            </div>

            <!-- 卡片主体 -->
            <div class="p-6">
                <!-- 错误消息 -->
                <div class="mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded">
                    <h2 class="text-lg font-semibold text-red-800 mb-2">Error Message</h2>
                    <p class="text-gray-700 font-mono bg-gray-50 p-3 rounded overflow-x-auto">
                        {{ exception.message }}
                    </p>
                </div>

                <!-- 错误位置 -->
				<!-- 错误位置 - 已调整为 8:2 比例 -->
				<div class="grid grid-cols-1 md:grid-cols-[8fr_2fr] gap-4 mb-6">
					<div class="p-4 bg-gray-50 rounded">
						<h2 class="text-lg font-semibold text-gray-800 mb-2 flex items-center">
							<i class="fa fa-file-code-o mr-2 text-blue-500"></i> File
						</h2>
						<p class="text-gray-700 font-mono bg-white p-2 rounded overflow-x-auto">
							{{ exception.file }}
						</p>
					</div>
					<div class="p-4 bg-gray-50 rounded">
						<h2 class="text-lg font-semibold text-gray-800 mb-2 flex items-center">
							<i class="fa fa-line-chart mr-2 text-green-500"></i> Line
						</h2>
						<p class="text-gray-700 font-mono bg-white p-2 rounded w-20 text-center">
							{{ exception.line }}
						</p>
					</div>
				</div>

                <!-- 错误追踪 (Trace) - 可折叠 -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button id="toggleTrace" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors">
                        <h2 class="text-lg font-semibold text-gray-800 flex items-center">
                            <i class="fa fa-history mr-2 text-purple-500"></i>
                            Stack Trace
                        </h2>
                        <i id="traceIcon" class="fa fa-chevron-down text-gray-500 transition-transform duration-300"></i>
                    </button>
                    <div id="traceContent" class="hidden p-4 bg-gray-50">
                        <ol class="list-decimal list-inside space-y-4 ml-2">
                            {% for trace in exception.trace %}
                                <li class="p-3 bg-white rounded shadow-sm border-l-2 border-purple-400">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                                        {% if trace.class %}
                                            <div>
                                                <span class="font-semibold text-gray-700">Class:</span>
                                                <span class="text-gray-600 ml-1">{{ trace.class }}</span>
                                            </div>
                                            <div>
                                                <span class="font-semibold text-gray-700">Function:</span>
                                                <span class="text-gray-600 ml-1">{{ trace.function }}</span>
                                            </div>
                                        {% else %}
                                            <div class="md:col-span-2">
                                                <span class="font-semibold text-gray-700">Function:</span>
                                                <span class="text-gray-600 ml-1">{{ trace.function }}</span>
                                            </div>
                                        {% endif %}
                                        <div class="md:col-span-2">
                                            <span class="font-semibold text-gray-700">File:</span>
                                            <span class="text-gray-600 ml-1 font-mono text-xs md:text-sm">{{ trace.file }}:{{ trace.line }}</span>
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                </div>
            </div>

            <!-- 卡片底部 -->
            <div class="bg-gray-50 p-4 border-t border-gray-200 text-center">
                <p class="text-gray-600">
                    <a href="#" class="text-blue-500 hover:text-blue-700 font-medium">
                        <i class="fa fa-refresh mr-1"></i> Refresh Page
                    </a>
                    <span class="mx-2 text-gray-400">|</span>
                    <a href="/" class="text-blue-500 hover:text-blue-700 font-medium">
                        <i class="fa fa-home mr-1"></i> Return to Home
                    </a>
                </p>
            </div>
        </div>

        <!-- 页脚 -->
        <p class="mt-6 text-gray-500 text-sm">
            {{ 'now'|date('Y') }} Your Application Name. All rights reserved.
        </p>
    </div>

    <!-- JavaScript for toggle functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButton = document.getElementById('toggleTrace');
            const traceContent = document.getElementById('traceContent');
            const traceIcon = document.getElementById('traceIcon');

            toggleButton.addEventListener('click', function() {
                traceContent.classList.toggle('hidden');
                traceIcon.classList.toggle('rotate-180');
            });
        });
    </script>
</body>
</html>